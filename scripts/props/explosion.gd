@tool
extends Sprite2D
class_name Explosion

#const EXPLOSION_TEXTURES_FOLDER: String = "res://assets/props/explosion/textures/"

var _explode: bool = false
func explode() -> void:
	_explode = true

var _explosion_textures: Array[Texture2D] = [preload("res://assets/props/explosion/textures/static_0000.png"), preload("res://assets/props/explosion/textures/static_0001.png"), preload("res://assets/props/explosion/textures/static_0002.png"), preload("res://assets/props/explosion/textures/static_0003.png"), preload("res://assets/props/explosion/textures/static_0004.png"), preload("res://assets/props/explosion/textures/static_0005.png"), preload("res://assets/props/explosion/textures/static_0006.png"), preload("res://assets/props/explosion/textures/static_0007.png"), preload("res://assets/props/explosion/textures/static_0008.png"), preload("res://assets/props/explosion/textures/static_0009.png"), preload("res://assets/props/explosion/textures/static_0010.png"), preload("res://assets/props/explosion/textures/static_0011.png"), preload("res://assets/props/explosion/textures/static_0012.png"), preload("res://assets/props/explosion/textures/static_0013.png"), preload("res://assets/props/explosion/textures/static_0014.png"), preload("res://assets/props/explosion/textures/static_0015.png"), preload("res://assets/props/explosion/textures/static_0016.png"), preload("res://assets/props/explosion/textures/static_0017.png"), preload("res://assets/props/explosion/textures/static_0018.png"), preload("res://assets/props/explosion/textures/static_0019.png"), preload("res://assets/props/explosion/textures/static_0020.png"), preload("res://assets/props/explosion/textures/static_0021.png"), preload("res://assets/props/explosion/textures/static_0022.png"), preload("res://assets/props/explosion/textures/static_0023.png"), preload("res://assets/props/explosion/textures/static_0024.png"), preload("res://assets/props/explosion/textures/static_0025.png"), preload("res://assets/props/explosion/textures/static_0026.png"), preload("res://assets/props/explosion/textures/static_0027.png"), preload("res://assets/props/explosion/textures/static_0028.png"), preload("res://assets/props/explosion/textures/static_0029.png"), preload("res://assets/props/explosion/textures/static_0030.png"), preload("res://assets/props/explosion/textures/static_0031.png"), preload("res://assets/props/explosion/textures/static_0032.png"), preload("res://assets/props/explosion/textures/static_0033.png"), preload("res://assets/props/explosion/textures/static_0034.png"), preload("res://assets/props/explosion/textures/static_0035.png"), preload("res://assets/props/explosion/textures/static_0036.png"), preload("res://assets/props/explosion/textures/static_0037.png"), preload("res://assets/props/explosion/textures/static_0038.png"), preload("res://assets/props/explosion/textures/static_0039.png"), preload("res://assets/props/explosion/textures/static_0040.png"), preload("res://assets/props/explosion/textures/static_0041.png"), preload("res://assets/props/explosion/textures/static_0042.png"), preload("res://assets/props/explosion/textures/static_0043.png"), preload("res://assets/props/explosion/textures/static_0044.png"), preload("res://assets/props/explosion/textures/static_0045.png"), preload("res://assets/props/explosion/textures/static_0046.png"), preload("res://assets/props/explosion/textures/static_0047.png"), preload("res://assets/props/explosion/textures/static_0048.png"), preload("res://assets/props/explosion/textures/static_0049.png"), preload("res://assets/props/explosion/textures/static_0050.png"), preload("res://assets/props/explosion/textures/static_0051.png"), preload("res://assets/props/explosion/textures/static_0052.png"), preload("res://assets/props/explosion/textures/static_0053.png"), preload("res://assets/props/explosion/textures/static_0054.png"), preload("res://assets/props/explosion/textures/static_0055.png"), preload("res://assets/props/explosion/textures/static_0056.png"), preload("res://assets/props/explosion/textures/static_0057.png"), preload("res://assets/props/explosion/textures/static_0058.png"), preload("res://assets/props/explosion/textures/static_0059.png"), preload("res://assets/props/explosion/textures/static_0060.png"), preload("res://assets/props/explosion/textures/static_0061.png"), preload("res://assets/props/explosion/textures/static_0062.png"), preload("res://assets/props/explosion/textures/static_0063.png"), preload("res://assets/props/explosion/textures/static_0064.png"), preload("res://assets/props/explosion/textures/static_0065.png"), preload("res://assets/props/explosion/textures/static_0066.png"), preload("res://assets/props/explosion/textures/static_0067.png"), preload("res://assets/props/explosion/textures/static_0068.png"), preload("res://assets/props/explosion/textures/static_0069.png"), preload("res://assets/props/explosion/textures/static_0070.png"), preload("res://assets/props/explosion/textures/static_0071.png"), preload("res://assets/props/explosion/textures/static_0072.png"), preload("res://assets/props/explosion/textures/static_0073.png"), preload("res://assets/props/explosion/textures/static_0074.png"), preload("res://assets/props/explosion/textures/static_0075.png"), preload("res://assets/props/explosion/textures/static_0076.png"), preload("res://assets/props/explosion/textures/static_0077.png"), preload("res://assets/props/explosion/textures/static_0078.png"), preload("res://assets/props/explosion/textures/static_0079.png"), preload("res://assets/props/explosion/textures/static_0080.png"), preload("res://assets/props/explosion/textures/static_0081.png"), preload("res://assets/props/explosion/textures/static_0082.png"), preload("res://assets/props/explosion/textures/static_0083.png"), preload("res://assets/props/explosion/textures/static_0084.png"), preload("res://assets/props/explosion/textures/static_0085.png"), preload("res://assets/props/explosion/textures/static_0086.png"), preload("res://assets/props/explosion/textures/static_0087.png"), preload("res://assets/props/explosion/textures/static_0088.png"), preload("res://assets/props/explosion/textures/static_0089.png"), preload("res://assets/props/explosion/textures/static_0090.png"), preload("res://assets/props/explosion/textures/static_0091.png"), preload("res://assets/props/explosion/textures/static_0092.png"), preload("res://assets/props/explosion/textures/static_0093.png"), preload("res://assets/props/explosion/textures/static_0094.png"), preload("res://assets/props/explosion/textures/static_0095.png"), preload("res://assets/props/explosion/textures/static_0096.png"), preload("res://assets/props/explosion/textures/static_0097.png"), preload("res://assets/props/explosion/textures/static_0098.png"), preload("res://assets/props/explosion/textures/static_0099.png"), preload("res://assets/props/explosion/textures/static_0100.png"), preload("res://assets/props/explosion/textures/static_0101.png"), preload("res://assets/props/explosion/textures/static_0102.png"), preload("res://assets/props/explosion/textures/static_0103.png"), preload("res://assets/props/explosion/textures/static_0104.png"), preload("res://assets/props/explosion/textures/static_0105.png"), preload("res://assets/props/explosion/textures/static_0106.png"), preload("res://assets/props/explosion/textures/static_0107.png"), preload("res://assets/props/explosion/textures/static_0108.png"), preload("res://assets/props/explosion/textures/static_0109.png"), preload("res://assets/props/explosion/textures/static_0110.png"), preload("res://assets/props/explosion/textures/static_0111.png"), preload("res://assets/props/explosion/textures/static_0112.png"), preload("res://assets/props/explosion/textures/static_0113.png"), preload("res://assets/props/explosion/textures/static_0114.png"), preload("res://assets/props/explosion/textures/static_0115.png"), preload("res://assets/props/explosion/textures/static_0116.png"), preload("res://assets/props/explosion/textures/static_0117.png"), preload("res://assets/props/explosion/textures/static_0118.png"), preload("res://assets/props/explosion/textures/static_0119.png"), preload("res://assets/props/explosion/textures/static_0120.png"), preload("res://assets/props/explosion/textures/static_0121.png"), preload("res://assets/props/explosion/textures/static_0122.png"), preload("res://assets/props/explosion/textures/static_0123.png"), preload("res://assets/props/explosion/textures/static_0124.png"), preload("res://assets/props/explosion/textures/static_0125.png"), preload("res://assets/props/explosion/textures/static_0126.png"), preload("res://assets/props/explosion/textures/static_0127.png"), preload("res://assets/props/explosion/textures/static_0128.png"), preload("res://assets/props/explosion/textures/static_0129.png"), preload("res://assets/props/explosion/textures/static_0130.png"), preload("res://assets/props/explosion/textures/static_0131.png"), preload("res://assets/props/explosion/textures/static_0132.png"), preload("res://assets/props/explosion/textures/static_0133.png"), preload("res://assets/props/explosion/textures/static_0134.png"), preload("res://assets/props/explosion/textures/static_0135.png"), preload("res://assets/props/explosion/textures/static_0136.png"), preload("res://assets/props/explosion/textures/static_0137.png"), preload("res://assets/props/explosion/textures/static_0138.png"), preload("res://assets/props/explosion/textures/static_0139.png"), preload("res://assets/props/explosion/textures/static_0140.png"), preload("res://assets/props/explosion/textures/static_0141.png"), preload("res://assets/props/explosion/textures/static_0142.png"), preload("res://assets/props/explosion/textures/static_0143.png"), preload("res://assets/props/explosion/textures/static_0144.png"), preload("res://assets/props/explosion/textures/static_0145.png"), preload("res://assets/props/explosion/textures/static_0146.png"), preload("res://assets/props/explosion/textures/static_0147.png"), preload("res://assets/props/explosion/textures/static_0148.png"), preload("res://assets/props/explosion/textures/static_0149.png"), preload("res://assets/props/explosion/textures/static_0150.png"), preload("res://assets/props/explosion/textures/static_0151.png"), preload("res://assets/props/explosion/textures/static_0152.png"), preload("res://assets/props/explosion/textures/static_0153.png"), preload("res://assets/props/explosion/textures/static_0154.png"), preload("res://assets/props/explosion/textures/static_0155.png"), preload("res://assets/props/explosion/textures/static_0156.png"), preload("res://assets/props/explosion/textures/static_0157.png"), preload("res://assets/props/explosion/textures/static_0158.png"), preload("res://assets/props/explosion/textures/static_0159.png"), preload("res://assets/props/explosion/textures/static_0160.png"), preload("res://assets/props/explosion/textures/static_0161.png"), preload("res://assets/props/explosion/textures/static_0162.png"), preload("res://assets/props/explosion/textures/static_0163.png"), preload("res://assets/props/explosion/textures/static_0164.png"), preload("res://assets/props/explosion/textures/static_0165.png"), preload("res://assets/props/explosion/textures/static_0166.png"), preload("res://assets/props/explosion/textures/static_0167.png"), preload("res://assets/props/explosion/textures/static_0168.png"), preload("res://assets/props/explosion/textures/static_0169.png"), preload("res://assets/props/explosion/textures/static_0170.png"), preload("res://assets/props/explosion/textures/static_0171.png"), preload("res://assets/props/explosion/textures/static_0172.png"), preload("res://assets/props/explosion/textures/static_0173.png"), preload("res://assets/props/explosion/textures/static_0174.png"), preload("res://assets/props/explosion/textures/static_0175.png"), preload("res://assets/props/explosion/textures/static_0176.png"), preload("res://assets/props/explosion/textures/static_0177.png")]
var _explosion_frame: int = 0
var _explosion_fps: float = 240.0
var _explosion_fps_delta: float = 0.0

func _process(delta: float) -> void:
	if Engine.is_editor_hint():
		return
	
	if !_explode:
		texture = null
		return
	
	var explode_fps_delta: float = 1.0 / _explosion_fps
	_explosion_fps_delta += delta
	while _explosion_fps_delta > explode_fps_delta:
		_explosion_fps_delta -= explode_fps_delta
		_explosion_frame += 1
		if _explosion_frame >= _explosion_textures.size():
			_explode = false
	
	if _explode:
		texture = _explosion_textures[_explosion_frame]
